ARM GAS  C:\Users\Teodor\AppData\Local\Temp\cc65plLS.s 			page 1


   1              		.cpu cortex-m3
   2              		.arch armv7-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"main.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.UART2_TransmitDMAEndCallBack,"ax",%progbits
  18              		.align	1
  19              		.global	UART2_TransmitDMAEndCallBack
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  24              	UART2_TransmitDMAEndCallBack:
  25              	.LFB65:
  26              		.file 1 "main.c"
   1:main.c        **** #define DLT_LOG_CONTEX           "MAIN"
   2:main.c        **** #define DLT_LOG_APPID            "NUM1"
   3:main.c        **** 
   4:main.c        **** #include "main.h"
   5:main.c        **** #include "DLTuc.h"
   6:main.c        **** #include "nnRTOS.h"
   7:main.c        **** #include "stdint.h"
   8:main.c        **** 
   9:main.c        **** 
  10:main.c        **** UART_DMA_Handle_Td *Uart2HandlerPointer;  
  11:main.c        **** 
  12:main.c        **** 
  13:main.c        **** /*CallBacks used by ucDltLibrary section start..*/
  14:main.c        **** void UART2_TransmitDMAEndCallBack()
  15:main.c        **** {
  27              		.loc 1 15 1 view -0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31 0000 08B5     		push	{r3, lr}
  32              	.LCFI0:
  33              		.cfi_def_cfa_offset 8
  34              		.cfi_offset 3, -8
  35              		.cfi_offset 14, -4
  16:main.c        **** 	DLTuc_MessageTransmitDone(); /*Inform ucDLTlib about message transmission end*/
  36              		.loc 1 16 2 view .LVU1
  37 0002 FFF7FEFF 		bl	DLTuc_MessageTransmitDone
  38              	.LVL0:
  17:main.c        **** 		/*This way to make this example simple to read...*/
  18:main.c        **** }
  39              		.loc 1 18 1 is_stmt 0 view .LVU2
  40 0006 08BD     		pop	{r3, pc}
ARM GAS  C:\Users\Teodor\AppData\Local\Temp\cc65plLS.s 			page 2


  41              		.cfi_endproc
  42              	.LFE65:
  44              		.section	.text.UART2_LowLevelDataTransmit,"ax",%progbits
  45              		.align	1
  46              		.global	UART2_LowLevelDataTransmit
  47              		.syntax unified
  48              		.thumb
  49              		.thumb_func
  51              	UART2_LowLevelDataTransmit:
  52              	.LVL1:
  53              	.LFB66:
  19:main.c        **** 
  20:main.c        **** 
  21:main.c        **** /*This CallBack was registered in main function using function: DLTuc_RegisterTransmitSerialDataCal
  22:main.c        **** void UART2_LowLevelDataTransmit(uint8_t *DltLogData, uint8_t Size)
  23:main.c        **** {
  54              		.loc 1 23 1 is_stmt 1 view -0
  55              		.cfi_startproc
  56              		@ args = 0, pretend = 0, frame = 0
  57              		@ frame_needed = 0, uses_anonymous_args = 0
  58              		.loc 1 23 1 is_stmt 0 view .LVU4
  59 0000 08B5     		push	{r3, lr}
  60              	.LCFI1:
  61              		.cfi_def_cfa_offset 8
  62              		.cfi_offset 3, -8
  63              		.cfi_offset 14, -4
  64 0002 0A46     		mov	r2, r1
  24:main.c        **** 	/*This function is called by ucDLTlib when is something to send*/
  25:main.c        **** 
  26:main.c        **** 	TUART_DMA_Trasmit(Uart2HandlerPointer,DltLogData,Size); /*Call of this function may block contex!!
  65              		.loc 1 26 2 is_stmt 1 view .LVU5
  66 0004 0146     		mov	r1, r0
  67              	.LVL2:
  68              		.loc 1 26 2 is_stmt 0 view .LVU6
  69 0006 024B     		ldr	r3, .L5
  70 0008 1868     		ldr	r0, [r3]
  71              	.LVL3:
  72              		.loc 1 26 2 view .LVU7
  73 000a FFF7FEFF 		bl	TUART_DMA_Trasmit
  74              	.LVL4:
  27:main.c        **** 		/*This way to make this example simple to read...*/
  28:main.c        **** }
  75              		.loc 1 28 1 view .LVU8
  76 000e 08BD     		pop	{r3, pc}
  77              	.L6:
  78              		.align	2
  79              	.L5:
  80 0010 00000000 		.word	.LANCHOR0
  81              		.cfi_endproc
  82              	.LFE66:
  84              		.section	.text.main,"ax",%progbits
  85              		.align	1
  86              		.global	main
  87              		.syntax unified
  88              		.thumb
  89              		.thumb_func
  91              	main:
ARM GAS  C:\Users\Teodor\AppData\Local\Temp\cc65plLS.s 			page 3


  92              	.LFB67:
  29:main.c        **** /*CallBacks used by ucDltLibrary section end..*/
  30:main.c        **** 
  31:main.c        **** extern void TaskContex1(void);
  32:main.c        **** extern void TaskContex2(void);
  33:main.c        **** extern void TaskContex3(void);
  34:main.c        **** 
  35:main.c        **** 
  36:main.c        **** uint32_t count6,count7;
  37:main.c        **** 
  38:main.c        **** int main(void)
  39:main.c        **** {
  93              		.loc 1 39 1 is_stmt 1 view -0
  94              		.cfi_startproc
  95              		@ Volatile: function does not return.
  96              		@ args = 0, pretend = 0, frame = 0
  97              		@ frame_needed = 0, uses_anonymous_args = 0
  98 0000 08B5     		push	{r3, lr}
  99              	.LCFI2:
 100              		.cfi_def_cfa_offset 8
 101              		.cfi_offset 3, -8
 102              		.cfi_offset 14, -4
  40:main.c        **** 	PLL_Config64MHZ();
 103              		.loc 1 40 2 view .LVU10
 104 0002 FFF7FEFF 		bl	PLL_Config64MHZ
 105              	.LVL5:
  41:main.c        **** 
  42:main.c        **** 	nnOsKernelInit();
 106              		.loc 1 42 2 view .LVU11
 107 0006 FFF7FEFF 		bl	nnOsKernelInit
 108              	.LVL6:
  43:main.c        **** 	if(nnOsAddThread(&TaskContex1,1) != Call_ok)
 109              		.loc 1 43 2 view .LVU12
 110              		.loc 1 43 5 is_stmt 0 view .LVU13
 111 000a 0121     		movs	r1, #1
 112 000c 1448     		ldr	r0, .L16
 113 000e FFF7FEFF 		bl	nnOsAddThread
 114              	.LVL7:
 115              		.loc 1 43 4 view .LVU14
 116 0012 00B1     		cbz	r0, .L8
 117              	.L9:
  44:main.c        **** 	{
  45:main.c        **** 		while(1); //Error!
 118              		.loc 1 45 3 is_stmt 1 discriminator 1 view .LVU15
 119              		.loc 1 45 11 discriminator 1 view .LVU16
 120              		.loc 1 45 8 discriminator 1 view .LVU17
 121 0014 FEE7     		b	.L9
 122              	.L8:
  46:main.c        **** 	}
  47:main.c        **** 	if(nnOsAddThread(&TaskContex2,2) != Call_ok)
 123              		.loc 1 47 2 view .LVU18
 124              		.loc 1 47 5 is_stmt 0 view .LVU19
 125 0016 0221     		movs	r1, #2
 126 0018 1248     		ldr	r0, .L16+4
 127 001a FFF7FEFF 		bl	nnOsAddThread
 128              	.LVL8:
 129              		.loc 1 47 4 view .LVU20
ARM GAS  C:\Users\Teodor\AppData\Local\Temp\cc65plLS.s 			page 4


 130 001e 00B1     		cbz	r0, .L10
 131              	.L11:
  48:main.c        **** 	{
  49:main.c        **** 		while(1); //Error!
 132              		.loc 1 49 3 is_stmt 1 discriminator 2 view .LVU21
 133              		.loc 1 49 11 discriminator 2 view .LVU22
 134              		.loc 1 49 8 discriminator 2 view .LVU23
 135 0020 FEE7     		b	.L11
 136              	.L10:
  50:main.c        **** 	}
  51:main.c        **** 	if(nnOsAddThread(&TaskContex3,2) != Call_ok)
 137              		.loc 1 51 2 view .LVU24
 138              		.loc 1 51 5 is_stmt 0 view .LVU25
 139 0022 0221     		movs	r1, #2
 140 0024 1048     		ldr	r0, .L16+8
 141 0026 FFF7FEFF 		bl	nnOsAddThread
 142              	.LVL9:
 143              		.loc 1 51 4 view .LVU26
 144 002a 00B1     		cbz	r0, .L12
 145              	.L13:
  52:main.c        **** 	{
  53:main.c        **** 		while(1); //Error!
 146              		.loc 1 53 3 is_stmt 1 discriminator 3 view .LVU27
 147              		.loc 1 53 11 discriminator 3 view .LVU28
 148              		.loc 1 53 8 discriminator 3 view .LVU29
 149 002c FEE7     		b	.L13
 150              	.L12:
  54:main.c        **** 	}
  55:main.c        **** 
  56:main.c        **** 	GPIO_Pin_Cfg(GPIOA,Px5,gpio_mode_output_PP_2MHz);
 151              		.loc 1 56 2 view .LVU30
 152 002e 0F4C     		ldr	r4, .L16+12
 153 0030 0222     		movs	r2, #2
 154 0032 0521     		movs	r1, #5
 155 0034 2046     		mov	r0, r4
 156 0036 FFF7FEFF 		bl	GPIO_Pin_Cfg
 157              	.LVL10:
  57:main.c        **** 	GPIO_PinSet(GPIOA, Psm5); /*Led is very exicited! :) */
 158              		.loc 1 57 2 view .LVU31
 159 003a 2021     		movs	r1, #32
 160 003c 2046     		mov	r0, r4
 161 003e FFF7FEFF 		bl	GPIO_PinSet
 162              	.LVL11:
  58:main.c        **** 	Uart2HandlerPointer = UART2_Init115200(UART2_TransmitDMAEndCallBack);
 163              		.loc 1 58 2 view .LVU32
 164              		.loc 1 58 24 is_stmt 0 view .LVU33
 165 0042 0B48     		ldr	r0, .L16+16
 166 0044 FFF7FEFF 		bl	UART2_Init115200
 167              	.LVL12:
 168              		.loc 1 58 22 view .LVU34
 169 0048 0A4B     		ldr	r3, .L16+20
 170 004a 1860     		str	r0, [r3]
  59:main.c        **** 	/*Init UART with baud 115200 and pass pointer called after transmission end (transmit complet DMA)
  60:main.c        **** 	/*Microcontoler Initialization end...*/
  61:main.c        **** 	/**********************************************************/
  62:main.c        **** 
  63:main.c        **** 
ARM GAS  C:\Users\Teodor\AppData\Local\Temp\cc65plLS.s 			page 5


  64:main.c        **** 	/*Register Low Level Transmit function for DLTuc Library*/
  65:main.c        **** 	DLTuc_RegisterTransmitSerialDataCallback(UART2_LowLevelDataTransmit);
 171              		.loc 1 65 2 is_stmt 1 view .LVU35
 172 004c 0A48     		ldr	r0, .L16+24
 173 004e FFF7FEFF 		bl	DLTuc_RegisterTransmitSerialDataCallback
 174              	.LVL13:
  66:main.c        **** 	DLTuc_RegisterGetTimeStampMsCallback(nnOs_GetSystemTime); 	/*Register GetSysTime function*/
 175              		.loc 1 66 2 view .LVU36
 176 0052 0A48     		ldr	r0, .L16+28
 177 0054 FFF7FEFF 		bl	DLTuc_RegisterGetTimeStampMsCallback
 178              	.LVL14:
  67:main.c        **** 	/*The function "GetSysTime" must return the time in ms*/
  68:main.c        **** 
  69:main.c        **** 	/*Now ucDLTlib is ready to work!*/
  70:main.c        **** 	// LOGL(DL_INFO, "DLT TESTS START!!!");
  71:main.c        **** 
  72:main.c        **** 	nnOsKernelLaunch(QUANTA);
 179              		.loc 1 72 2 view .LVU37
 180 0058 0120     		movs	r0, #1
 181 005a FFF7FEFF 		bl	nnOsKernelLaunch
 182              	.LVL15:
 183              	.L14:
  73:main.c        **** 
  74:main.c        **** 	while(1); /*We shouldn't reach never*/
 184              		.loc 1 74 2 discriminator 4 view .LVU38
 185              		.loc 1 74 10 discriminator 4 view .LVU39
 186              		.loc 1 74 7 discriminator 4 view .LVU40
 187 005e FEE7     		b	.L14
 188              	.L17:
 189              		.align	2
 190              	.L16:
 191 0060 00000000 		.word	TaskContex1
 192 0064 00000000 		.word	TaskContex2
 193 0068 00000000 		.word	TaskContex3
 194 006c 00080140 		.word	1073809408
 195 0070 00000000 		.word	UART2_TransmitDMAEndCallBack
 196 0074 00000000 		.word	.LANCHOR0
 197 0078 00000000 		.word	UART2_LowLevelDataTransmit
 198 007c 00000000 		.word	nnOs_GetSystemTime
 199              		.cfi_endproc
 200              	.LFE67:
 202              		.global	count7
 203              		.global	count6
 204              		.global	Uart2HandlerPointer
 205              		.section	.bss.Uart2HandlerPointer,"aw",%nobits
 206              		.align	2
 207              		.set	.LANCHOR0,. + 0
 210              	Uart2HandlerPointer:
 211 0000 00000000 		.space	4
 212              		.section	.bss.count6,"aw",%nobits
 213              		.align	2
 216              	count6:
 217 0000 00000000 		.space	4
 218              		.section	.bss.count7,"aw",%nobits
 219              		.align	2
 222              	count7:
 223 0000 00000000 		.space	4
ARM GAS  C:\Users\Teodor\AppData\Local\Temp\cc65plLS.s 			page 6


 224              		.text
 225              	.Letext0:
 226              		.file 2 "d:\\gnu_tools\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\machine\\_
 227              		.file 3 "d:\\gnu_tools\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\sys\\_stdi
 228              		.file 4 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f103xb.h"
 229              		.file 5 "Drivers/uart_dma/USART_UART_DMA.h"
 230              		.file 6 "Drivers/GPIO_f1/GPIO_fun.h"
 231              		.file 7 "nnRtos/inc/nn_rtosTypes.h"
 232              		.file 8 "Drivers/System/RCC_Config.h"
 233              		.file 9 "nnRtos/inc/nnRTOS.h"
 234              		.file 10 "../../src/DLTuc.h"
ARM GAS  C:\Users\Teodor\AppData\Local\Temp\cc65plLS.s 			page 7


DEFINED SYMBOLS
                            *ABS*:00000000 main.c
C:\Users\Teodor\AppData\Local\Temp\cc65plLS.s:18     .text.UART2_TransmitDMAEndCallBack:00000000 $t
C:\Users\Teodor\AppData\Local\Temp\cc65plLS.s:24     .text.UART2_TransmitDMAEndCallBack:00000000 UART2_TransmitDMAEndCallBack
C:\Users\Teodor\AppData\Local\Temp\cc65plLS.s:45     .text.UART2_LowLevelDataTransmit:00000000 $t
C:\Users\Teodor\AppData\Local\Temp\cc65plLS.s:51     .text.UART2_LowLevelDataTransmit:00000000 UART2_LowLevelDataTransmit
C:\Users\Teodor\AppData\Local\Temp\cc65plLS.s:80     .text.UART2_LowLevelDataTransmit:00000010 $d
C:\Users\Teodor\AppData\Local\Temp\cc65plLS.s:85     .text.main:00000000 $t
C:\Users\Teodor\AppData\Local\Temp\cc65plLS.s:91     .text.main:00000000 main
C:\Users\Teodor\AppData\Local\Temp\cc65plLS.s:191    .text.main:00000060 $d
C:\Users\Teodor\AppData\Local\Temp\cc65plLS.s:222    .bss.count7:00000000 count7
C:\Users\Teodor\AppData\Local\Temp\cc65plLS.s:216    .bss.count6:00000000 count6
C:\Users\Teodor\AppData\Local\Temp\cc65plLS.s:210    .bss.Uart2HandlerPointer:00000000 Uart2HandlerPointer
C:\Users\Teodor\AppData\Local\Temp\cc65plLS.s:206    .bss.Uart2HandlerPointer:00000000 $d
C:\Users\Teodor\AppData\Local\Temp\cc65plLS.s:213    .bss.count6:00000000 $d
C:\Users\Teodor\AppData\Local\Temp\cc65plLS.s:219    .bss.count7:00000000 $d

UNDEFINED SYMBOLS
DLTuc_MessageTransmitDone
TUART_DMA_Trasmit
PLL_Config64MHZ
nnOsKernelInit
nnOsAddThread
GPIO_Pin_Cfg
GPIO_PinSet
UART2_Init115200
DLTuc_RegisterTransmitSerialDataCallback
DLTuc_RegisterGetTimeStampMsCallback
nnOsKernelLaunch
TaskContex1
TaskContex2
TaskContex3
nnOs_GetSystemTime
