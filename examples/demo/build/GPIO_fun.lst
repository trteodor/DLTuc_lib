ARM GAS  C:\Users\Teodor\AppData\Local\Temp\ccDUliQo.s 			page 1


   1              		.cpu cortex-m3
   2              		.arch armv7-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"GPIO_fun.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.tooglePIN,"ax",%progbits
  18              		.align	1
  19              		.global	tooglePIN
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  24              	tooglePIN:
  25              	.LVL0:
  26              	.LFB65:
  27              		.file 1 "Drivers/GPIO_f1/GPIO_fun.c"
   1:Drivers/GPIO_f1/GPIO_fun.c **** #include "GPIO_fun.h"
   2:Drivers/GPIO_f1/GPIO_fun.c **** #define GPIO_NUMBER           16u
   3:Drivers/GPIO_f1/GPIO_fun.c **** 
   4:Drivers/GPIO_f1/GPIO_fun.c **** void tooglePIN(GPIO_TypeDef *GPIOx, Gpio_Ch_st GPIO_Pin)
   5:Drivers/GPIO_f1/GPIO_fun.c **** {
  28              		.loc 1 5 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
   6:Drivers/GPIO_f1/GPIO_fun.c ****   uint32_t odr;
  33              		.loc 1 6 3 view .LVU1
   7:Drivers/GPIO_f1/GPIO_fun.c ****   odr = GPIOx->ODR;
  34              		.loc 1 7 3 view .LVU2
  35              		.loc 1 7 7 is_stmt 0 view .LVU3
  36 0000 C368     		ldr	r3, [r0, #12]
  37              	.LVL1:
   8:Drivers/GPIO_f1/GPIO_fun.c ****   GPIOx->BSRR = ((odr & GPIO_Pin) << GPIO_NUMBER) | (~odr & GPIO_Pin); //taki trick
  38              		.loc 1 8 3 is_stmt 1 view .LVU4
  39              		.loc 1 8 23 is_stmt 0 view .LVU5
  40 0002 01EA0302 		and	r2, r1, r3
  41              		.loc 1 8 59 view .LVU6
  42 0006 21EA0301 		bic	r1, r1, r3
  43              	.LVL2:
  44              		.loc 1 8 51 view .LVU7
  45 000a 41EA0241 		orr	r1, r1, r2, lsl #16
  46              		.loc 1 8 15 view .LVU8
  47 000e 0161     		str	r1, [r0, #16]
   9:Drivers/GPIO_f1/GPIO_fun.c **** }
  48              		.loc 1 9 1 view .LVU9
  49 0010 7047     		bx	lr
ARM GAS  C:\Users\Teodor\AppData\Local\Temp\ccDUliQo.s 			page 2


  50              		.cfi_endproc
  51              	.LFE65:
  53              		.section	.text.GPIO_PinSet,"ax",%progbits
  54              		.align	1
  55              		.global	GPIO_PinSet
  56              		.syntax unified
  57              		.thumb
  58              		.thumb_func
  60              	GPIO_PinSet:
  61              	.LVL3:
  62              	.LFB66:
  10:Drivers/GPIO_f1/GPIO_fun.c **** 
  11:Drivers/GPIO_f1/GPIO_fun.c **** 
  12:Drivers/GPIO_f1/GPIO_fun.c **** void GPIO_PinSet(GPIO_TypeDef *GPIOx, Gpio_Ch_st GPIO_Pin)
  13:Drivers/GPIO_f1/GPIO_fun.c **** {
  63              		.loc 1 13 1 is_stmt 1 view -0
  64              		.cfi_startproc
  65              		@ args = 0, pretend = 0, frame = 0
  66              		@ frame_needed = 0, uses_anonymous_args = 0
  67              		@ link register save eliminated.
  14:Drivers/GPIO_f1/GPIO_fun.c ****   GPIOx->BSRR = GPIO_Pin;
  68              		.loc 1 14 3 view .LVU11
  69              		.loc 1 14 15 is_stmt 0 view .LVU12
  70 0000 0161     		str	r1, [r0, #16]
  15:Drivers/GPIO_f1/GPIO_fun.c ****   
  16:Drivers/GPIO_f1/GPIO_fun.c **** }
  71              		.loc 1 16 1 view .LVU13
  72 0002 7047     		bx	lr
  73              		.cfi_endproc
  74              	.LFE66:
  76              		.section	.text.GPIO_PinReset,"ax",%progbits
  77              		.align	1
  78              		.global	GPIO_PinReset
  79              		.syntax unified
  80              		.thumb
  81              		.thumb_func
  83              	GPIO_PinReset:
  84              	.LVL4:
  85              	.LFB67:
  17:Drivers/GPIO_f1/GPIO_fun.c **** 
  18:Drivers/GPIO_f1/GPIO_fun.c **** void GPIO_PinReset(GPIO_TypeDef *GPIOx, Gpio_Ch_st GPIO_Pin)
  19:Drivers/GPIO_f1/GPIO_fun.c **** {
  86              		.loc 1 19 1 is_stmt 1 view -0
  87              		.cfi_startproc
  88              		@ args = 0, pretend = 0, frame = 0
  89              		@ frame_needed = 0, uses_anonymous_args = 0
  90              		@ link register save eliminated.
  20:Drivers/GPIO_f1/GPIO_fun.c ****   uint32_t odr;
  91              		.loc 1 20 3 view .LVU15
  21:Drivers/GPIO_f1/GPIO_fun.c ****   odr = GPIOx->ODR;
  92              		.loc 1 21 3 view .LVU16
  93              		.loc 1 21 7 is_stmt 0 view .LVU17
  94 0000 C368     		ldr	r3, [r0, #12]
  95              	.LVL5:
  22:Drivers/GPIO_f1/GPIO_fun.c ****   GPIOx->BSRR = ((odr & GPIO_Pin) << GPIO_NUMBER);
  96              		.loc 1 22 3 is_stmt 1 view .LVU18
  97              		.loc 1 22 23 is_stmt 0 view .LVU19
ARM GAS  C:\Users\Teodor\AppData\Local\Temp\ccDUliQo.s 			page 3


  98 0002 1940     		ands	r1, r1, r3
  99              	.LVL6:
 100              		.loc 1 22 35 view .LVU20
 101 0004 0904     		lsls	r1, r1, #16
 102              		.loc 1 22 15 view .LVU21
 103 0006 0161     		str	r1, [r0, #16]
  23:Drivers/GPIO_f1/GPIO_fun.c **** }
 104              		.loc 1 23 1 view .LVU22
 105 0008 7047     		bx	lr
 106              		.cfi_endproc
 107              	.LFE67:
 109              		.section	.text.GPIO_Pin_Cfg,"ax",%progbits
 110              		.align	1
 111              		.global	GPIO_Pin_Cfg
 112              		.syntax unified
 113              		.thumb
 114              		.thumb_func
 116              	GPIO_Pin_Cfg:
 117              	.LVL7:
 118              	.LFB68:
  24:Drivers/GPIO_f1/GPIO_fun.c **** 
  25:Drivers/GPIO_f1/GPIO_fun.c **** void GPIO_Pin_Cfg(GPIO_TypeDef * const port, GpioPin_t pin, GpioMode_t mode)
  26:Drivers/GPIO_f1/GPIO_fun.c **** {
 119              		.loc 1 26 1 is_stmt 1 view -0
 120              		.cfi_startproc
 121              		@ args = 0, pretend = 0, frame = 0
 122              		@ frame_needed = 0, uses_anonymous_args = 0
 123              		@ link register save eliminated.
 124              		.loc 1 26 1 is_stmt 0 view .LVU24
 125 0000 10B4     		push	{r4}
 126              	.LCFI0:
 127              		.cfi_def_cfa_offset 4
 128              		.cfi_offset 4, -4
  27:Drivers/GPIO_f1/GPIO_fun.c **** 	//nadpisanie nic nie zepsuje alternatywa bitowa to alternatywa - no kosztem wydajnosci no ale
  28:Drivers/GPIO_f1/GPIO_fun.c **** 	if(port==GPIOA)
 129              		.loc 1 28 2 is_stmt 1 view .LVU25
 130              		.loc 1 28 4 is_stmt 0 view .LVU26
 131 0002 224B     		ldr	r3, .L16
 132 0004 9842     		cmp	r0, r3
 133 0006 18D0     		beq	.L12
 134              	.L5:
  29:Drivers/GPIO_f1/GPIO_fun.c **** 	{
  30:Drivers/GPIO_f1/GPIO_fun.c **** 		RCC->APB2ENR |=  RCC_APB2ENR_IOPAEN;
  31:Drivers/GPIO_f1/GPIO_fun.c **** 	}
  32:Drivers/GPIO_f1/GPIO_fun.c **** 		if(port==GPIOB)
 135              		.loc 1 32 3 is_stmt 1 view .LVU27
 136              		.loc 1 32 5 is_stmt 0 view .LVU28
 137 0008 214B     		ldr	r3, .L16+4
 138 000a 9842     		cmp	r0, r3
 139 000c 1BD0     		beq	.L13
 140              	.L6:
  33:Drivers/GPIO_f1/GPIO_fun.c **** 	{
  34:Drivers/GPIO_f1/GPIO_fun.c **** 		RCC->APB2ENR |=  RCC_APB2ENR_IOPBEN;
  35:Drivers/GPIO_f1/GPIO_fun.c **** 	}
  36:Drivers/GPIO_f1/GPIO_fun.c **** 		if(port==GPIOC)
 141              		.loc 1 36 3 is_stmt 1 view .LVU29
 142              		.loc 1 36 5 is_stmt 0 view .LVU30
ARM GAS  C:\Users\Teodor\AppData\Local\Temp\ccDUliQo.s 			page 4


 143 000e 214B     		ldr	r3, .L16+8
 144 0010 9842     		cmp	r0, r3
 145 0012 1ED0     		beq	.L14
 146              	.L7:
  37:Drivers/GPIO_f1/GPIO_fun.c **** 	{
  38:Drivers/GPIO_f1/GPIO_fun.c **** 		RCC->APB2ENR |=  RCC_APB2ENR_IOPCEN;
  39:Drivers/GPIO_f1/GPIO_fun.c **** 	}
  40:Drivers/GPIO_f1/GPIO_fun.c **** 		if(port==GPIOD)
 147              		.loc 1 40 3 is_stmt 1 view .LVU31
 148              		.loc 1 40 5 is_stmt 0 view .LVU32
 149 0014 204B     		ldr	r3, .L16+12
 150 0016 9842     		cmp	r0, r3
 151 0018 21D0     		beq	.L15
 152              	.L8:
  41:Drivers/GPIO_f1/GPIO_fun.c **** 	{
  42:Drivers/GPIO_f1/GPIO_fun.c **** 		RCC->APB2ENR |=  RCC_APB2ENR_IOPDEN;
  43:Drivers/GPIO_f1/GPIO_fun.c **** 	}
  44:Drivers/GPIO_f1/GPIO_fun.c **** 	
  45:Drivers/GPIO_f1/GPIO_fun.c **** 	if(pin<8)
 153              		.loc 1 45 2 is_stmt 1 view .LVU33
 154              		.loc 1 45 4 is_stmt 0 view .LVU34
 155 001a 0729     		cmp	r1, #7
 156 001c 25D8     		bhi	.L9
  46:Drivers/GPIO_f1/GPIO_fun.c **** 	{
  47:Drivers/GPIO_f1/GPIO_fun.c **** 		port->CRL &= ~((uint32_t)(0xf << (pin*4) ));
 157              		.loc 1 47 3 is_stmt 1 view .LVU35
 158              		.loc 1 47 13 is_stmt 0 view .LVU36
 159 001e 0468     		ldr	r4, [r0]
 160              		.loc 1 47 40 view .LVU37
 161 0020 8B00     		lsls	r3, r1, #2
 162              		.loc 1 47 33 view .LVU38
 163 0022 0F21     		movs	r1, #15
 164              	.LVL8:
 165              		.loc 1 47 33 view .LVU39
 166 0024 9940     		lsls	r1, r1, r3
 167              		.loc 1 47 13 view .LVU40
 168 0026 24EA0101 		bic	r1, r4, r1
 169 002a 0160     		str	r1, [r0]
  48:Drivers/GPIO_f1/GPIO_fun.c **** 		port->CRL |= mode << (pin*4);
 170              		.loc 1 48 3 is_stmt 1 view .LVU41
 171              		.loc 1 48 13 is_stmt 0 view .LVU42
 172 002c 0468     		ldr	r4, [r0]
 173              		.loc 1 48 21 view .LVU43
 174 002e 02FA03F1 		lsl	r1, r2, r3
 175              		.loc 1 48 13 view .LVU44
 176 0032 2143     		orrs	r1, r1, r4
 177 0034 0160     		str	r1, [r0]
 178              	.L4:
  49:Drivers/GPIO_f1/GPIO_fun.c **** 	}
  50:Drivers/GPIO_f1/GPIO_fun.c **** 	else
  51:Drivers/GPIO_f1/GPIO_fun.c **** 	{
  52:Drivers/GPIO_f1/GPIO_fun.c **** 		uint8_t pinH = pin - 8;  //to avoid warnings
  53:Drivers/GPIO_f1/GPIO_fun.c **** 		port->CRH &= ~((uint32_t)(0xf << (pinH*4) ));
  54:Drivers/GPIO_f1/GPIO_fun.c **** 		port->CRH |= mode << (pinH*4);
  55:Drivers/GPIO_f1/GPIO_fun.c **** 	}
  56:Drivers/GPIO_f1/GPIO_fun.c **** }	
 179              		.loc 1 56 1 view .LVU45
ARM GAS  C:\Users\Teodor\AppData\Local\Temp\ccDUliQo.s 			page 5


 180 0036 10BC     		pop	{r4}
 181              	.LCFI1:
 182              		.cfi_remember_state
 183              		.cfi_restore 4
 184              		.cfi_def_cfa_offset 0
 185 0038 7047     		bx	lr
 186              	.LVL9:
 187              	.L12:
 188              	.LCFI2:
 189              		.cfi_restore_state
  30:Drivers/GPIO_f1/GPIO_fun.c **** 	}
 190              		.loc 1 30 3 is_stmt 1 view .LVU46
  30:Drivers/GPIO_f1/GPIO_fun.c **** 	}
 191              		.loc 1 30 16 is_stmt 0 view .LVU47
 192 003a 184C     		ldr	r4, .L16+16
 193 003c A369     		ldr	r3, [r4, #24]
 194 003e 43F00403 		orr	r3, r3, #4
 195 0042 A361     		str	r3, [r4, #24]
 196 0044 E0E7     		b	.L5
 197              	.L13:
  34:Drivers/GPIO_f1/GPIO_fun.c **** 	}
 198              		.loc 1 34 3 is_stmt 1 view .LVU48
  34:Drivers/GPIO_f1/GPIO_fun.c **** 	}
 199              		.loc 1 34 16 is_stmt 0 view .LVU49
 200 0046 154C     		ldr	r4, .L16+16
 201 0048 A369     		ldr	r3, [r4, #24]
 202 004a 43F00803 		orr	r3, r3, #8
 203 004e A361     		str	r3, [r4, #24]
 204 0050 DDE7     		b	.L6
 205              	.L14:
  38:Drivers/GPIO_f1/GPIO_fun.c **** 	}
 206              		.loc 1 38 3 is_stmt 1 view .LVU50
  38:Drivers/GPIO_f1/GPIO_fun.c **** 	}
 207              		.loc 1 38 16 is_stmt 0 view .LVU51
 208 0052 124C     		ldr	r4, .L16+16
 209 0054 A369     		ldr	r3, [r4, #24]
 210 0056 43F01003 		orr	r3, r3, #16
 211 005a A361     		str	r3, [r4, #24]
 212 005c DAE7     		b	.L7
 213              	.L15:
  42:Drivers/GPIO_f1/GPIO_fun.c **** 	}
 214              		.loc 1 42 3 is_stmt 1 view .LVU52
  42:Drivers/GPIO_f1/GPIO_fun.c **** 	}
 215              		.loc 1 42 16 is_stmt 0 view .LVU53
 216 005e 0F4C     		ldr	r4, .L16+16
 217 0060 A369     		ldr	r3, [r4, #24]
 218 0062 43F02003 		orr	r3, r3, #32
 219 0066 A361     		str	r3, [r4, #24]
 220 0068 D7E7     		b	.L8
 221              	.L9:
 222              	.LBB2:
  52:Drivers/GPIO_f1/GPIO_fun.c **** 		port->CRH &= ~((uint32_t)(0xf << (pinH*4) ));
 223              		.loc 1 52 3 is_stmt 1 view .LVU54
  52:Drivers/GPIO_f1/GPIO_fun.c **** 		port->CRH &= ~((uint32_t)(0xf << (pinH*4) ));
 224              		.loc 1 52 11 is_stmt 0 view .LVU55
 225 006a 0839     		subs	r1, r1, #8
 226              	.LVL10:
ARM GAS  C:\Users\Teodor\AppData\Local\Temp\ccDUliQo.s 			page 6


  52:Drivers/GPIO_f1/GPIO_fun.c **** 		port->CRH &= ~((uint32_t)(0xf << (pinH*4) ));
 227              		.loc 1 52 11 view .LVU56
 228 006c C9B2     		uxtb	r1, r1
 229              	.LVL11:
  53:Drivers/GPIO_f1/GPIO_fun.c **** 		port->CRH |= mode << (pinH*4);
 230              		.loc 1 53 3 is_stmt 1 view .LVU57
  53:Drivers/GPIO_f1/GPIO_fun.c **** 		port->CRH |= mode << (pinH*4);
 231              		.loc 1 53 13 is_stmt 0 view .LVU58
 232 006e 4368     		ldr	r3, [r0, #4]
  53:Drivers/GPIO_f1/GPIO_fun.c **** 		port->CRH |= mode << (pinH*4);
 233              		.loc 1 53 41 view .LVU59
 234 0070 8900     		lsls	r1, r1, #2
 235              	.LVL12:
  53:Drivers/GPIO_f1/GPIO_fun.c **** 		port->CRH |= mode << (pinH*4);
 236              		.loc 1 53 33 view .LVU60
 237 0072 4FF00F0C 		mov	ip, #15
 238 0076 0CFA01FC 		lsl	ip, ip, r1
  53:Drivers/GPIO_f1/GPIO_fun.c **** 		port->CRH |= mode << (pinH*4);
 239              		.loc 1 53 13 view .LVU61
 240 007a 23EA0C03 		bic	r3, r3, ip
 241 007e 4360     		str	r3, [r0, #4]
  54:Drivers/GPIO_f1/GPIO_fun.c **** 	}
 242              		.loc 1 54 3 is_stmt 1 view .LVU62
  54:Drivers/GPIO_f1/GPIO_fun.c **** 	}
 243              		.loc 1 54 13 is_stmt 0 view .LVU63
 244 0080 4368     		ldr	r3, [r0, #4]
  54:Drivers/GPIO_f1/GPIO_fun.c **** 	}
 245              		.loc 1 54 21 view .LVU64
 246 0082 02FA01F1 		lsl	r1, r2, r1
  54:Drivers/GPIO_f1/GPIO_fun.c **** 	}
 247              		.loc 1 54 13 view .LVU65
 248 0086 1943     		orrs	r1, r1, r3
 249 0088 4160     		str	r1, [r0, #4]
 250              	.LBE2:
 251              		.loc 1 56 1 view .LVU66
 252 008a D4E7     		b	.L4
 253              	.L17:
 254              		.align	2
 255              	.L16:
 256 008c 00080140 		.word	1073809408
 257 0090 000C0140 		.word	1073810432
 258 0094 00100140 		.word	1073811456
 259 0098 00140140 		.word	1073812480
 260 009c 00100240 		.word	1073876992
 261              		.cfi_endproc
 262              	.LFE68:
 264              		.text
 265              	.Letext0:
 266              		.file 2 "d:\\gnu_tools\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\machine\\_
 267              		.file 3 "d:\\gnu_tools\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\sys\\_stdi
 268              		.file 4 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f103xb.h"
 269              		.file 5 "Drivers/GPIO_f1/GPIO_fun.h"
ARM GAS  C:\Users\Teodor\AppData\Local\Temp\ccDUliQo.s 			page 7


DEFINED SYMBOLS
                            *ABS*:00000000 GPIO_fun.c
C:\Users\Teodor\AppData\Local\Temp\ccDUliQo.s:18     .text.tooglePIN:00000000 $t
C:\Users\Teodor\AppData\Local\Temp\ccDUliQo.s:24     .text.tooglePIN:00000000 tooglePIN
C:\Users\Teodor\AppData\Local\Temp\ccDUliQo.s:54     .text.GPIO_PinSet:00000000 $t
C:\Users\Teodor\AppData\Local\Temp\ccDUliQo.s:60     .text.GPIO_PinSet:00000000 GPIO_PinSet
C:\Users\Teodor\AppData\Local\Temp\ccDUliQo.s:77     .text.GPIO_PinReset:00000000 $t
C:\Users\Teodor\AppData\Local\Temp\ccDUliQo.s:83     .text.GPIO_PinReset:00000000 GPIO_PinReset
C:\Users\Teodor\AppData\Local\Temp\ccDUliQo.s:110    .text.GPIO_Pin_Cfg:00000000 $t
C:\Users\Teodor\AppData\Local\Temp\ccDUliQo.s:116    .text.GPIO_Pin_Cfg:00000000 GPIO_Pin_Cfg
C:\Users\Teodor\AppData\Local\Temp\ccDUliQo.s:256    .text.GPIO_Pin_Cfg:0000008c $d

NO UNDEFINED SYMBOLS
